<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
  <head profile="http://www.w3.org/2005/10/profile">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Building QtlMovie</title>
    <link type="image/png" rel="icon" href="favicon.png">
    <link type="text/css" rel="stylesheet" href="default.css"/>
    <link type="text/css" rel="stylesheet" href="fontawesome.css"/>
    <script type="text/javascript" src="functions.js"></script>
  </head>
  <body>
    <nav class="w3-sidenav w3-collapse w3-white w3-animate-left w3-card-2" style="z-index:3;width:250px;" id="mySidenav">
      <a href="#" class="w3-sidenav-top w3-border-bottom w3-large"><img src="qtlmovie.png" style="width:80%;"/></a>
      <a href="javascript:void(0)" onclick="w3_close()" class="w3-text-teal w3-hide-large w3-closenav w3-large">Close <i class="fa fa-remove"></i></a>
      <div class="w3-accordion">
        <a onclick="myAccordion('menu-translations')" href="javascript:void(0)">Language <i class="fa fa-caret-down"></i></a>
        <div id="menu-translations" class="w3-accordion-content w3-animate-left w3-padding">
          <a href="qtlmovie-build.html"><img class="w3-navbar" src="flag_en.png"> English</a>
          <a href="qtlmovie-build_fr.html"><img class="w3-navbar" src="flag_fr.png"> Fran√ßais</a>
        </div>
      </div>
      <div class="w3-accordion">
        <a onclick="myAccordion('menu-documentation')" href="javascript:void(0)">Documentation <i class="fa fa-caret-down"></i></a>
        <div id="menu-documentation" class="w3-accordion-content w3-animate-left w3-padding">
          <a href="qtlmovie-intro.html">Introduction</a>
          <a href="qtlmovie-user.html">Using QtlMovie</a>
          <a href="qtlmovie-build.html">Building QtlMovie</a>
          <a href="qtlmovie-license.html">License</a>
        </div>
      </div>
      <div class="w3-firstnav w3-accordion">
        <a onclick="myAccordion('menu-linux')" href="javascript:void(0)">Building on Linux <i class="fa fa-caret-down"></i></a>
        <div id="menu-linux" class="w3-accordion-content w3-animate-left w3-padding">
          <a href="#linreq">Pre-requisites</a>
          <a href="#linmanbuild">Building manually</a>
          <a href="#linqtcreator">Building using Qt Creator</a>
          <a href="#fcbuild">Building the RPM package for Fedora</a>
          <a href="#ubbuild">Building the DEB package for Ubuntu</a>
          <a href="#lincleanup">Multi-platform build</a>
          <a href="#lindoxy">Building the Doxygen documentation</a>
        </div>
      </div>
      <div class="w3-accordion">
        <a onclick="myAccordion('menu-windows')" href="javascript:void(0)">Building on Windows <i class="fa fa-caret-down"></i></a>
        <div id="menu-windows" class="w3-accordion-content w3-animate-left w3-padding">
          <a href="#winreq">Pre-requisites</a>
          <a href="#winqt">Qt requirements</a>
          <a href="#winssl">OpenSSL requirements</a>
          <a href="#winps1">Windows PowerShell requirements</a>
          <a href="#winmanbuild">Building manually</a>
          <a href="#winqtcreator">Building using Qt Creator</a>
          <a href="#wincleanup">Multi-platform build</a>
          <a href="#windoxy">Building the Doxygen documentation</a>
          <a href="#winexec">Executing Qt applications</a>
          <a href="#wininstaller">Building the binary installer for Windows</a>
        </div>
      </div>
      <div class="w3-accordion">
        <a onclick="myAccordion('menu-macosx')" href="javascript:void(0)">Building on Mac OS X <i class="fa fa-caret-down"></i></a>
        <div id="menu-macosx" class="w3-accordion-content w3-animate-left w3-padding">
          <a href="#macreq">Pre-requisites</a>
          <a href="#macmanbuild">Building manually</a>
          <a href="#macqtcreator">Building using Qt Creator</a>
          <a href="#macdoxy">Building the Doxygen documentation</a>
          <a href="#macinstaller">Building the binary installer for Mac OS X</a>
        </div>
      </div>
    </nav>
    <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" id="myOverlay"></div>
    <div class="w3-main" style="margin-left:250px;">
      <div id="myTop" class="w3-top w3-container w3-padding-16 w3-theme w3-large">
        <i class="fa fa-bars w3-opennav w3-hide-large w3-xlarge w3-margin-left w3-margin-right" onclick="w3_open()"></i>
        <span id="myIntro" class="w3-hide">Building Guide</span>
      </div>
      <header class="w3-container w3-theme w3-padding-16" style="padding-left:32px">
        <h1 class="w3-xxxlarge w3-padding-16">Building QtlMovie</h1>
      </header>
      <div class="w3-container w3-padding-32" style="padding-left:32px">

        <div class="anchor" id="linux"><h2>Building QtlMovie on Linux</h2></div>

        <div class="anchor" id="linreq"><h3>Pre-requisites</h3></div>

        <p>QtlMovie can be built on any Linux platform supporting Qt 5.5.
          All development packages for Qt 5 shall be installed, including QtMultimedia.</p>
        <p>Using Qt Creator is optional. When used, Qt Creator version 2.7 or higher
          is required. Qt Creator is recommended to edit and modify the project.
          Simply building the product without modification does not require Qt Creator.</p>
        <p>Qt can be installed in system directories (<i>/usr/bin</i> et al.) from
          the distro packages or using binary installers from
          <a href="http://qt-project.org/">http://qt-project.org/</a>. In the later
          case, Qt is installed inside <i>/usr/local</i>.
          The script <i>build/QtSetEnvironment.rc</i> searches <i>/usr/local</i>
          for the most recent installation of Qt and add the required directories to the PATH.
          <i>QtSetEnvironment.rc</i> is automatically dot-sourced by all build scripts.</p>

        <div class="anchor" id="linmanbuild"><h3>Building QtlMovie manually</h3></div>

        <p>Run the script <i>build/build.sh</i>.</p>

        <div class="anchor" id="linqtcreator"><h3>Building QtlMovie using Qt Creator</h3></div>

        <p>Qt Creator shall be launched using the script <i>build/QtCreator.sh</i>.
          This script ensures that the appropriate environment is setup for the latest version of Qt.
          The QtlMovie project is automatically open.</p>
        <p>The first time Qt Creator is launched, accept all defaults for the project
          configuration, especially the <i>shadow build</i> configuration.</p>

        <div class="anchor" id="fcbuild"><h3>Building the QtlMovie RPM package for Fedora</h3></div>

        <p>Run the script <i>build/build-rpm.sh</i>.
          The RPM package is built in the directory <i>installers</i>.
          The RPM package is named <i>qtlmovie-1.6-0.fc19.x86_64.rpm</i> for instance,
          where "1.6" is the QtlMovie version, "19" is the Fedora version and "x86_64" is the platform.</p>
        <p>Following the package management rules, the RPM package contains only QtlMovie.
          It contains dependencies on the various media tools packages which must be separately installed.
          Note the following points on non-standard packages:</p>
        <ul class="qtl-topics">
          <li>The package <i>ffmpeg</i> is available through the RPMfusion repository, not the standard Fedora repositories.
            See <a href="http://rpmfusion.org/Configuration">rpmfusion.org</a> for the way to configure RPMfusion as
            a default repository for your system.</li>
          <li>The package <i>ccextractor</i> is not available as RPM packages in the
            various standard repositories. This package must be rebuilt manually using the script
            <i>linuxtools/ccextractor-rpmbuild.sh</i>.
            The script downloads the latest sources online and rebuilds the package.</li>
        </ul>

        <div class="anchor" id="ubbuild"><h3>Building the QtlMovie DEB package for Ubuntu</h3></div>

        <p>Run the script <i>build/build-deb.sh</i>.
          The DEB package is built in the directory <i>installers</i>.
          The DEB package is named <i>qtlmovie_1.2.16_amd64.deb</i> for instance,
          where "1.2.16" is the QtlMovie version and "amd64" is the platform.</p>
        <p>Following the package management rules, the DEB package contains only QtlMovie.
          It contains dependencies on the various media tools packages which must be separately installed.
          Note the following points on non-standard packages:</p>
        <ul class="qtl-topics">
          <li>On Ubuntu version 15 and higher, the package <i>ffmpeg</i> is available through the
            standard Ubuntu repositories.</li>
          <li>Prior to Ubuntu version 15, the package <i>ffmpeg</i> was available through the
            <a href="https://launchpad.net/~jon-severinsson/+archive/ffmpeg">Jon Severinsson's PPA</a>,
            not the standard Ubuntu repositories.
            See the <a href="qtlmovie-user.html#ubuntu">QtlMovie user guide</a>
            for the way to configure this PPA as a default repository for your system.</li>
          <li>The package <i>ccextractor</i> is not available as DEB packages in the
            various standard repositories. This packages must be rebuilt manually using the script
            <i>linuxtools/ccextractor-debbuild.sh</i>.
            The script downloads the latest sources online and rebuilds the packages.</li>
        </ul>

        <div class="anchor" id="lincleanup"><h3>Multi-platform build</h3></div>

        <p>When the project directory tree was previously used to build QtlMovie for
          another platform (either using a shared disk or as a result of a copy),
          clean up first using the script <i>build/cleanup.sh</i>.</p>
        <p>This script removes all previously generated files, including the Qt Creator
          platform-specific <i>.pro.user</i> files.</p>

        <div class="anchor" id="lindoxy"><h3>Building the Doxygen documentation</h3></div>

        <p>Run the script <i>build/build-doc.sh</i>.</p>

        <div class="anchor" id="windows"><h2>Building QtlMovie on Windows</h2></div>

        <p>There are probably different ways of building QtlMovie on Windows platforms.
          This chapter describes a proven way to do it but feel free to experiment...</p>

        <div class="anchor" id="winreq"><h3>Pre-requisites</h3></div>

        <p>The following products shall be installed before building QtlMovie.
          The minimum version numbers are indicated but later versions will probably work.</p>
        <ul>
          <li>Qt 5.5 (MinGW build environment)</li>
          <li>OpenSSL libraries 1.0</li>
          <li>NullSoft Scriptable Install System (NSIS) 2.46</li>
          <li>Windows PowerShell 3.0</li>
          <li>Microsoft .NET Framework 4.5</li>
        </ul>

        <div class="anchor" id="winqt"><h3>Qt requirements</h3></div>

        <p>QtlMovie can be built on any Windows platform supporting Qt 5.
          The MinGW version is recommended. Using Qt for Visual Studio may
          work but has not been tested.</p>
        <p>Using Qt Creator is optional. When used, Qt Creator version 2.7 or higher
          is required. Qt Creator is recommended to edit and modify the project.
          Simply building the product without modification does not require Qt Creator.</p>
        <p>Qt must be installed using the binary installers from
          <a href="http://qt-project.org/">qt-project.org</a>.
          Use the default installation location in <i>C:\Qt</i>.
          As an example, the Qt 5.7.0 installer file is
          <a href="http://download.qt.io/official_releases/qt/5.7/5.7.0/qt-opensource-windows-x86-mingw530-5.7.0.exe">
            qt-opensource-windows-x86-mingw530-5.7.0.exe</a>.</p>
        <p>Important: When installing Qt, select the option <i>Tools</i>, then <i>MinGW</i>.</p>

        <div class="anchor" id="winssl"><h3>OpenSSL requirements</h3></div>

        <p>On Windows, Qt does not include OpenSSL libraries. OpenSSL is required to use HTTPS.
          QtlMovie does not use any network operation, except when it checks the availability of
          a new version online. Depending on the provider configuration, this check may use
          HTTPS and consequently requires OpenSSL.</p>
        <p>OpenSLL binary libraries are available from
          <a href="https://slproweb.com/products/Win32OpenSSL.html">slproweb.com</a>.
          Select the latest Win32 installer.
          Use the default installation location in <i>C:\OpenSSL-Win32</i>.
          As an example, the installer file for OpenSSL 1.0.2j is
          <a href="https://slproweb.com/download/Win32OpenSSL-1_0_2j.exe">Win32OpenSSL-1_0_2j.exe</a>.</p>
        <p>Important:</p>
        <ul>
          <li>When installing OpenSSL, select the option <i>Copy OpenSSL DLLs</i> to
            <i>The OpenSSL binaries (/bin) directory</i>. This is usually the default.</li>
          <li>It is currently recommended to use OpenSSL 1.0.x, not 1.1.x.
            The naming of the library files has changed with 1.1.x (at least as found in 1.1.0c).
            They are named <i>libcrypto-1_1.dll</i> and <i>libssl-1_1.dll</i> instead of
            the traditional Windows names <i>libeay32.dll</i> and <i>ssleay32.dll</i>.
            The problem is that Qt searches <i>libeay32.dll</i> and <i>ssleay32.dll</i>,
            not the new names, and will fail to use SSL. If you want to test a newer version
            of OpenSSL, check the presence of <i>libeay32.dll</i> and <i>ssleay32.dll</i>
            in <i>C:\OpenSSL-Win32\bin</i>.</li>
        </ul>

        <div class="anchor" id="winps1"><h3>Windows PowerShell requirements</h3></div>

        <p>All Windows scripts in the build directory use the Windows PowerShell.
          The minimum required PowerShell version is 3.0.</p>
        <p>
          To display the current version, start a PowerShell command window and enter the
          following command (here version 3.0):</p>
<pre>
PS> $PSVersionTable.PSVersion

Major  Minor  Build  Revision
-----  -----  -----  --------
3      0      -1     -1
</pre>
        <p>PowerShell 3.0 comes with Windows 8. For Windows 7, download and install
          <a href="http://www.microsoft.com/en-us/download/details.aspx?id=34595">PowerShell 3.0</a>.</p>
        <p>Prior to installing PowerShell 3.0, download and install Microsoft
          <a href="http://www.microsoft.com/en-us/download/details.aspx?id=30653">.NET Framework 4.5</a>
          (or use the direct link to
          <a href="http://go.microsoft.com/fwlink/?LinkId=225702">dotnetfx45_full_x86_x64.exe</a>
          for 64-bit systems).
        <p>After installing .NET 4.5 and PowerShell 3.0, do not forget to run Windows Update
          since many security updates are likely to emerge. Also expect a few reboots.</p>
        <p>A Windows PowerShell script file name has a <i>.ps1</i> extension. The Windows
          default action on double-click is to edit the script file using notepad.
          This is not convenient. The registry file <i>build\WindowsPowerShellTools.reg</i>
          modifies the default behavior so that a script is executed on double-click.</p>
        <p>If double-clicking on a <i>.ps1</i> file does not execute the script, activate
          <i>build\WindowsPowerShellTools.reg</i> (double-click and accept modifications).
          The effect is permanent.</p>

        <div class="anchor" id="winmanbuild"><h3>Building QtlMovie manually</h3></div>

        <p>Execute the script <i>build\build.ps1</i>.</p>

        <div class="anchor" id="winqtcreator"><h3>Building QtlMovie using Qt Creator</h3></div>

        <p>Qt Creator shall be launched using the script <i>build\QtCreator.ps1</i>.
          This script ensures that the appropriate environment is setup for the latest version of Qt.
          The QtlMovie project is automatically open.</p>
        <p>The first time Qt Creator is launched, accept all defaults for the project
          configuration, especially the <i>shadow build</i> configuration.</p>

        <div class="anchor" id="wincleanup"><h3>Multi-platform build</h3></div>

        <p>When the project directory tree was previously used to build QtlMovie for
          another platform (either using a shared disk or as a result of a copy),
          clean up first using the script <i>build\cleanup.ps1</i>.</p>
        <p>This script removes all previously generated files, including the Qt Creator
          platform-specific <i>.pro.user</i> files.</p>

        <div class="anchor" id="windoxy"><h3>Building the Doxygen documentation</h3></div>

        <p>Execute the script <i>build\build-doc.ps1</i>.</p>

        <div class="anchor" id="winexec"><h3>Executing Qt applications</h3></div>

        <p>To manually run Qt applications, the appropriate environment shall be setup
          first. Execute the script <i>build\QtCommandLine.ps1</i> to create a
          PowerShell command window with the appropriate setup to run Qt applications
          such as the <i>QtlMovie.exe</i> you just compiled.</p>

        <div class="anchor" id="wininstaller"><h3>Building the QtlMovie binary installer for Windows</h3></div>

        <p>The binary installer is created using NSIS, the NullSoft Scriptable Install
          System. NSIS is free software and is available for download at
          <a href="http://nsis.sourceforge.net/">http://nsis.sourceforge.net/</a>.
          NSIS version 2.46 has been used by QtlMovie.</p>
        <p>To build the QtlMovie binary installer for Windows, execute the script
          <i>build\build-installer.ps1</i>.</p>
        <p>This script also builds the "standalone" archive, an alternative for
          users without administration privileges who cannot execute the standard installer.</p>

        <div class="anchor" id="macosx"><h2>Building QtlMovie on Mac OS X</h2></div>
        
        <div class="anchor" id="macreq"><h3>Pre-requisites</h3></div>

        <p>QtlMovie can be built on any Mac OS X platform supporting Qt 5.
          All development packages for Qt 5 shall be installed, including QtMultimedia.</p>
        <p>Using Qt Creator is optional. When used, Qt Creator version 2.7 or higher
          is required. Qt Creator is recommended to edit and modify the project.
          Simply building the product without modification does not require Qt Creator.</p>
        <p>Before installing Qt, Xcode shall be installed first from the Apple AppStore (it is a free application).
          Xcode is required because it installs the C++ compiler and other development tools.</p>

        <div class="anchor" id="macmanbuild"><h3>Building QtlMovie manually</h3></div>

        <p>Run the script <i>build/build.sh</i>.</p>

        <div class="anchor" id="macqtcreator"><h3>Building QtlMovie using Qt Creator</h3></div>

        <p>Qt Creator shall be launched from the Mac OS X Launcher.
          The first time Qt Creator is launched, accept all defaults for the project
          configuration, especially the <i>shadow build</i> configuration.</p>
        
        <div class="anchor" id="macdoxy"><h3>Building the Doxygen documentation</h3></div>

        <p>Run the script <i>build/build-doc.sh</i>.</p>

        <div class="anchor" id="macinstaller"><h3>Building the QtlMovie binary installer for Mac OS X</h3></div>

        <p>Run the script <i>build/build-mac.sh</i>.
          The DMG package is built in the directory <i>installers</i>.
          The DMG package is named <i>QtlMovie-1.6.dmg</i> for instance,
          where "1.6" is the QtlMovie version.</p>

      </div>
      <footer class="w3-container w3-theme w3-padding-16" style="padding-left:32px">
        <p>QtlMovie is Free and Open Source |
          <a href="http://qtlmovie.sourceforge.net/" target="_blank">Web Site</a> |
          <a href="https://github.com/qtlmovie/qtlmovie/issues" target="_blank">Report a problem</a></p>
      </footer>
    </div>
  </body>
</html> 
