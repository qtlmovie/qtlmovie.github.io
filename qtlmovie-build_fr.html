<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="fr">
  <head profile="http://www.w3.org/2005/10/profile">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Construction de QtlMovie</title>
    <link type="image/png" rel="icon" href="favicon.png">
    <link type="text/css" rel="stylesheet" href="default.css"/>
    <link type="text/css" rel="stylesheet" href="fontawesome.css"/>
    <script type="text/javascript" src="functions.js"></script>
  </head>
  <body>
    <nav class="w3-sidenav w3-collapse w3-white w3-animate-left w3-card-2" style="z-index:3;width:250px;" id="mySidenav">
      <a href="#" class="w3-sidenav-top w3-border-bottom w3-large"><img src="qtlmovie.png" style="width:80%;"/></a>
      <a href="javascript:void(0)" onclick="w3_close()" class="w3-text-teal w3-hide-large w3-closenav w3-large">Fermer <i class="fa fa-remove"></i></a>
      <div class="w3-accordion">
        <a onclick="myAccordion('menu-translations')" href="javascript:void(0)">Langue <i class="fa fa-caret-down"></i></a>
        <div id="menu-translations" class="w3-accordion-content w3-animate-left w3-padding">
          <a href="qtlmovie-build.html"><img class="w3-navbar" src="flag_en.png"> English</a>
          <a href="qtlmovie-build_fr.html"><img class="w3-navbar" src="flag_fr.png"> Français</a>
        </div>
      </div>
      <div class="w3-accordion">
        <a onclick="myAccordion('menu-documentation')" href="javascript:void(0)">Documentation <i class="fa fa-caret-down"></i></a>
        <div id="menu-documentation" class="w3-accordion-content w3-animate-left w3-padding">
          <a href="qtlmovie-intro_fr.html">Introduction</a>
          <a href="qtlmovie-user_fr.html">Utilisation de QtlMovie</a>
          <a href="qtlmovie-build_fr.html">Construction de QtlMovie</a>
          <a href="qtlmovie-license_fr.html">Licence</a>
        </div>
      </div>
      <div class="w3-firstnav w3-accordion">
        <a onclick="myAccordion('menu-macosx')" href="javascript:void(0)">Construire sur Mac OS <i class="fa fa-caret-down"></i></a>
        <div id="menu-macosx" class="w3-accordion-content w3-animate-left w3-padding">
          <a href="#macreq">Pré-requis</a>
          <a href="#macmanbuild">Construire manuellement</a>
          <a href="#macqtcreator">Construire avec Qt Creator</a>
          <a href="#macdoxy">Construire la documentation Doxygen</a>
          <a href="#macinstaller">Construire le package DMG pour Mac OS</a>
        </div>
      </div>
      <div class="w3-accordion">
        <a onclick="myAccordion('menu-windows')" href="javascript:void(0)">Construire sur Windows <i class="fa fa-caret-down"></i></a>
        <div id="menu-windows" class="w3-accordion-content w3-animate-left w3-padding">
          <a href="#winreq">Pré-requis</a>
          <a href="#winqt">Version de Qt</a>
          <a href="#winssl">Librairies OpenSSL</a>
          <a href="#winps1">Windows PowerShell</a>
          <a href="#winmanbuild">Construire manuellement</a>
          <a href="#winqtcreator">Construire avec Qt Creator</a>
          <a href="#wincleanup">Construction multi-platformes</a>
          <a href="#windoxy">Construire la documentation Doxygen</a>
          <a href="#winexec">Executer des applications Qt</a>
          <a href="#wininstaller">Construire l'installeur binaire pour Windows</a>
        </div>
      </div>
      <div class="w3-accordion">
        <a onclick="myAccordion('menu-linux')" href="javascript:void(0)">Construire sur Linux <i class="fa fa-caret-down"></i></a>
        <div id="menu-linux" class="w3-accordion-content w3-animate-left w3-padding">
          <a href="#linreq">Pré-requis</a>
          <a href="#linmanbuild">Construire manuellement</a>
          <a href="#linqtcreator">Construire avec Qt Creator</a>
          <a href="#fcbuild">Construire le package RPM pour Fedora</a>
          <a href="#ubbuild">Construire le package DEB pour Ubuntu</a>
          <a href="#lincleanup">Construction multi-platformes</a>
          <a href="#lindoxy">Construire la documentation Doxygen</a>
        </div>
      </div>
    </nav>
    <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" id="myOverlay"></div>
    <div class="w3-main" style="margin-left:250px;">
      <div id="myTop" class="w3-top w3-container w3-padding-16 w3-theme w3-large">
        <i class="fa fa-bars w3-opennav w3-hide-large w3-xlarge w3-margin-left w3-margin-right" onclick="w3_open()"></i>
        <span id="myIntro" class="w3-hide">Guide de Construction</span>
      </div>
      <header class="w3-container w3-theme w3-padding-16" style="padding-left:32px">
        <h1 class="w3-xxxlarge w3-padding-16">Construction de QtlMovie</h1>
      </header>
      <div class="w3-container w3-padding-32" style="padding-left:32px">

        <div class="anchor" id="macosx"><h2>Construire QtlMovie sur Mac OS</h2></div>

        <div class="anchor" id="macreq"><h3>Pré-requis</h3></div>

        <p>QtlMovie peut être construit sur n'importe quelle plate-forme Mac OS supportant Qt 5.5 ou plus.
          Tous les packages de développement de Qt 5 doivent être installés, y compris QtMultimedia.</p>
        <p>L'utilisation de Qt Creator n'est pas obligatoire.
          S'il est utilisé, Qt Creator version 2.7 ou plus requis.
          Qt Creator est recommandé pour éditer ou modifier le projet.
          Construire le produit sans le modifier ne nécessite pas Qt Creator.</p>

        <div class="anchor" id="macmanbuild"><h3>Construire QtlMovie manuellement</h3></div>

        <p>Exécuter le script <i>build/build.sh</i>.</p>

        <div class="anchor" id="macqtcreator"><h3>Construire QtlMovie avec Qt Creator</h3></div>

        <p>Qt Creator doit être lancé via le Launcher de Mac OS.
          La première fois que Qt Creator est lancé, accepter toutes les options
          par défaut du projet, notamment la configuration de <i>shadow build</i>.</p>

        <div class="anchor" id="macdoxy"><h3>Construire la documentation Doxygen</h3></div>

        <p>Exécuter le script <i>build/build-doc.sh</i>.</p>

        <div class="anchor" id="macinstaller"><h3>Construire le package DMG de QtlMovie pour Mac OS</h3></div>

        <p>Exécuter le script <i>build/build-mac.sh</i>.
          Le package DMG est construit dans le répertoire <i>installers</i>.
          Le package DMG se nomme <i>QtlMovie-1.6.dmg</i> par exemple,
          où "1.6" est la version de QtlMovie.</p>
        
        <div class="anchor" id="windows"><h2>Construire QtlMovie sur Windows</h2></div>

        <p>Il y a probablement plusieurs façons différents de construire QtlMovie sur les
          plates-formes Windows. Ce chapitre décrit une manière qui a prouvé son
          efficacité mais vous pouvez en expérimenter d'autres...</p>

        <div class="anchor" id="winreq"><h3>Pré-requis</h3></div>

        <p>Les produits suivants doivent être installés avant de reconstruire QtlMovie.
          Les numéros de version minimum sont indiqués mais des versions supérieures
          fonctionnent probablement.</p>
        <ul>
          <li>Qt 5.5 (avec environnement MinGW)</li>
          <li>Librairies OpenSSL 1.0</li>
          <li>NullSoft Scriptable Install System (NSIS) 2.46</li>
          <li>Windows PowerShell 3.0</li>
          <li>Microsoft .NET Framework 4.5</li>
        </ul>

        <div class="anchor" id="winqt"><h3>Version de Qt</h3></div>

        <p>QtlMovie peut être reconstruit sur n'importe quelle version de Windows supportant Qt 5.5 ou plus.
          La version MinGW est recommandée. Utiliser Qt avec Visual Studio fonctionne certainement
          mais n'a pas été testé..</p>
        <p>L'utilisation de Qt Creator n'est pas obligatoire.
          S'il est utilisé, Qt Creator version 2.7 ou plus requis.
          Qt Creator est recommandé pour éditer ou modifier le projet.
          Construire le produit sans le modifier ne nécessite pas Qt Creator.</p>
        <p>Qt peut être installé en utilisant les installeurs binaires disponibles sur
          <a href="http://qt-project.org/">qt-project.org</a>.
          Utiliser l'installation par défaut dans <i>C:\Qt</i>.
          A titre d'exemple, l'installeur binaire pour Qt 5.7.0 est
          <a href="http://download.qt.io/official_releases/qt/5.7/5.7.0/qt-opensource-windows-x86-mingw530-5.7.0.exe">
            qt-opensource-windows-x86-mingw530-5.7.0.exe</a>.</p>
        <p>Important: Lors de l'installation de Qt, sélectionner l'option <i>Tools</i>, puis <i>MinGW</i>.</p>

        <div class="anchor" id="winssl"><h3>Librairies OpenSSL</h3></div>

        <p>Sur Windows, Qt n'inclut pas les librairies OpenSSL. OpenSSL est indispensable pour
          utiliser HTTPS. QtlMovie ne fait aucune opération sur le réseau, sauf pour aller
          vérifier la disponibilité d'une nouvelle version sur Internet. Selon la configuration
          du fournisseur de service, cette opération peut utiliser HTTPS et par conséquent
          requiert OpenSSL.</p>
        <p>Les librairies binaires OpenSLL sont disponibles sur
          <a href="https://slproweb.com/products/Win32OpenSSL.html">slproweb.com</a>.
          Sélectionner la version Win32 la plus récente.
          Utiliser l'installation par défaut dans <i>C:\OpenSSL-Win32</i>.
          A titre d'exemple, l'installeur binaire pour OpenSSL 1.0.2j est
          <a href="https://slproweb.com/download/Win32OpenSSL-1_0_2j.exe">Win32OpenSSL-1_0_2j.exe</a>.</p>
        <p>Important:</p>
        <ul>
          <li>Lors de l'installation d'OpenSSL, sélectionner l'option <i>Copy OpenSSL DLLs</i> vers
            <i>The OpenSSL binaries (/bin) directory</i>.</li>
          <li>Il est actuellement recommandé d'utiliser OpenSSL 1.0.x, pas 1.1.x.
            Le nommage des fichiers de librairie a changé en 1.1.x (tout au moins tel que constaté avec la 1.1.0c).
            Les librairies sont nommées <i>libcrypto-1_1.dll</i> et <i>libssl-1_1.dll</i> au lieu
            des noms Windows traditionnels <i>libeay32.dll</i> et <i>ssleay32.dll</i>.
            Le problème est que Qt recherche <i>libeay32.dll</i> et <i>ssleay32.dll</i>,
            pas les nouveaux noms. Il lui sera alors impossible d'utiliser SSL.
            Si vous voulez tester une version plus récente d'OpenSSL, vérifiez la présence
            de <i>libeay32.dll</i> et <i>ssleay32.dll</i> dans <i>C:\OpenSSL-Win32\bin</i>.</li>
        </ul>

        <div class="anchor" id="winps1"><h3>Windows PowerShell</h3></div>

        <p>Tous les scripts  Windows dans le répertoire <i>build</i> utilisent Windows PowerShell.
          La version minimum requise est PowerShell 3.0.</p>
        <p>Pour afficher la version courante, ouvrez une fenêtre de commande PowerShell et tapez la
          commande suivante (une version 3.0 dans ce cas):</p>
<pre>
PS> $PSVersionTable.PSVersion

Major  Minor  Build  Revision
-----  -----  -----  --------
3      0      -1     -1
</pre>
        <p>PowerShell 3.0 est installé avec Windows 8. Sur Windows 7, téléchargez et installez
          <a href="http://www.microsoft.com/en-us/download/details.aspx?id=34595">PowerShell 3.0</a>.</p>
        <p>Avant d'installer PowerShell 3.0, téléchargez et installez Microsoft
          <a href="http://www.microsoft.com/en-us/download/details.aspx?id=30653">.NET Framework 4.5</a>
          (ou utilisez le lien direct
          <a href="http://go.microsoft.com/fwlink/?LinkId=225702">dotnetfx45_full_x86_x64.exe</a>
          pour les systèmes 64-bit).
        <p>Après avoir installé .NET 4.5 and PowerShell 3.0, n'oubliez pas de lancer Windows Update
          car quelques mises à jour de sécurité seront probablement disponibles. Il faut également
          s'attendre à quelques reboots.</p>
        <p>Un script Windows PowerShell a une extension <i>.ps1</i>.
          L'action par défaut de Windows sur un double-clic est d'éditer le fichier script avec <i>notepad</i>.
          Ce n'est pas très pratique. Le fichier de registre <i>build\WindowsPowerShellTools.reg</i>
          modifie ce comportement par défaut de telle sorte qu'un script soit exécuté sur un double-clic.</p>
        <p>Si un double-clic sur un fichier <i>.ps1</i> n'exécute pas le script, activez
          <i>build\WindowsPowerShellTools.reg</i> (double-clic puis accepter les modifications).
          L'effet est permanent.</p>

        <div class="anchor" id="winmanbuild"><h3>Construire QtlMovie manuellement</h3></div>

        <p>Exécuter le script <i>build\build.ps1</i>.</p>

        <div class="anchor" id="winqtcreator"><h3>Construire QtlMovie avec Qt Creator</h3></div>

        <p>Qt Creator doit être lancé par le script <i>build\QtCreator.ps1</i>.
          Ce script positionne l'environnement nécessaire pour la dernière version de Qt.
          Le projet QtlMovie est automatiquement ouvert.</p>
        <p>La première fois que Qt Creator est lancé, accepter toutes les options
          par défaut du projet, notamment la configuration de <i>shadow build</i>.</p>

        <div class="anchor" id="wincleanup"><h3>Construction multi-platformes</h3></div>

        <p>Quand les répertoires du projet ont été précédement utilisés pour construire QtlMovie
          pour une autre plate-forme (soit depuis un disque partagé ou après une copie de fichiers),
          nettoyer d'abord l'arborescence de fichiers avec le script <i>build\cleanup.ps1</i>.</p>
        <p>Ce script détruit tous les fichiers précédement générés, y compris les fichiers de
          configuration spécifiques <i>.pro.user</i>.</p>

        <div class="anchor" id="windoxy"><h3>Construire la documentation Doxygen</h3></div>

        <p>Exécuter le script <i>build\build-doc.ps1</i>.</p>

        <div class="anchor" id="winexec"><h3>Exécuter des applications Qt</h3></div>

        <p>Pour exécuter manuellement des applications Qt, il faut d'abort positionner
          l'environnement approprié. Exécuter le script <i>build\QtCommandLine.ps1</i>
          pour créer une fenêtre de commande PowerShell avec l'environnement
          approprié pour exécuter des application Qt comme le <i>QtlMovie.exe</i>
          que vous venez de compiler.</p>

        <div class="anchor" id="wininstaller"><h3>Construire l'installeur binaire de QtlMovie pour Windows</h3></div>

        <p>L'installeur binaire de QtlMovie est créé par NSIS (NullSoft Scriptable Install System).
          NSIS est un logiciel libre disponible en téléchargement sur le site
          <a href="http://nsis.sourceforge.net/">http://nsis.sourceforge.net/</a>.
          NSIS version 2.46 a été utilisé pour QtlMovie.</p>
        <p>Pour construire l'installeur binaire de QtlMovie, exécuter le script
          <i>build\build-installer.ps1</i>.</p>
        <p>Ce script construit également l'archive "standalone", une alternative pour
          les utilisateurs sans privilège administrateur qui ne peuvent pas exécuter
          l'installeur standard.</p>

        <div class="anchor" id="linux"><h2>Construire QtlMovie sur Linux</h2></div>

        <div class="anchor" id="linreq"><h3>Pré-requis</h3></div>

        <p>QtlMovie peut être construit sur n'importe quelle plate-forme Linux supportant Qt 5.5 ou plus.
          Tous les packages de développement de Qt 5 doivent être installés.</p>
        <p>L'utilisation de Qt Creator n'est pas obligatoire.
          S'il est utilisé, Qt Creator version 2.7 ou plus requis.
          Qt Creator est recommandé pour éditer ou modifier le projet.
          Construire le produit sans le modifier ne nécessite pas Qt Creator.</p>
        <p>Qt peut être installé dans les répertoires système (<i>/usr/bin</i> ou équivalent)
          avec les packages standards de la distribution Linux ou en utilisant les installeurs binaires
          de <a href="http://qt-project.org/">http://qt-project.org/</a>.
          Dans ce dernier cas, Qt est installé dans <i>/usr/local</i>.
          Le script <i>build/QtSetEnvironment.rc</i> recherche
          l'installation de Qt la plus récente dans <i>/usr/local</i> et ajoute les répertoires
          nécessaires dans le PATH.
          <i>QtSetEnvironment.rc</i> est automatiquement invoqué par tous les scripts de construction.</p>
        <p>Pour installer l'environnement de construction sur Fedora:</p>
<pre>
sudo dnf install qt5-qttools qt5-devel qt-creator rpmdevtools
</pre>
        <p>Pour installer l'environnement de construction sur Ubuntu:</p>
<pre>
sudo apt-get install qtcreator qtbase5-dev qt5-default qtmultimedia5-dev
</pre>

        <div class="anchor" id="linmanbuild"><h3>Construire QtlMovie manuellement</h3></div>

        <p>Exécuter le script <i>build/build.sh</i>.</p>

        <div class="anchor" id="linqtcreator"><h3>Construire QtlMovie avec Qt Creator</h3></div>

        <p>Qt Creator doit être lancé par le script <i>build/QtCreator.sh</i>.
          Ce script positionne l'environnement nécessaire pour la dernière version de Qt.
          Le projet QtlMovie est automatiquement ouvert.</p>
        <p>La première fois que Qt Creator est lancé, accepter toutes les options
          par défaut du projet, notamment la configuration de <i>shadow build</i>.</p>

        <div class="anchor" id="fcbuild"><h3>Construire le package RPM de QtlMovie pour Fedora</h3></div>

        <p>Exécuter le script <i>build/build-rpm.sh</i>.
          Le package RPM est construit dans le répertoire <i>installers</i>.
          Le package RPM se nomme <i>qtlmovie-1.6-0.fc19.x86_64.rpm</i> par exemple,
          où "1.6" est la version de QtlMovie, "19" est la version de Fedora et "x86_64" est la plate-forme.</p>
        <p>Suivant les règles habituelles de gestion de package, le package RPM ne contient que QtlMovie.
          Il contient des dépendances sur les packages des divers outils media qui doivent être installés séparement.
          Noter les points suivants sur les packages non-standards:</p>
        <ul class="qtl-topics">
          <li>Le package <i>ffmpeg</i> est disponible via RPMfusion mais pas dans les dépots standards de Fedora.
            Voir sur <a href="http://rpmfusion.org/Configuration">rpmfusion.org</a> pour une description de la
            manière de configurer RPMfusion dans les dépots par défaut de votre système.</li>
          <li>Le package <i>ccextractor</i> n'est pas disponible dans les divers dépots
            standards de Fedora. Ce package doit être reconstruit manuellement en utilisant le script
            <i>linuxtools/ccextractor-rpmbuild.sh</i>.
            Ce script télécharge la dernière version des sources en ligne et reconstruit le package.</li>
        </ul>

        <div class="anchor" id="ubbuild"><h3>Construire le package DEB de QtlMovie pour Ubuntu</h3></div>

        <p>Exécuter le script <i>build/build-deb.sh</i>.
          Le package DEB est construit dans le répertoire <i>installers</i>.
          Le package DEB se nomme <i>qtlmovie_1.2.16_amd64.deb</i> par exemple,
          où "1.2.16" est la version de QtlMovie et "amd64" est la plate-forme.</p>
        <p>Suivant les règles habituelles de gestion de package, le package DEB ne contient que QtlMovie.
          Il contient des dépendances sur les packages des divers outils media qui doivent être installés séparement.
          Noter les points suivants sur les packages non-standards:</p>
        <ul class="qtl-topics">
          <li>Sur Ubuntu version 15 ou supérieure, le package <i>ffmpeg</i> est disponible dans
            les dépots standards d'Ubuntu.</li>
          <li>Avant la version 15 d'Ubuntu, le package <i>ffmpeg</i> était disponible via le
            <a href="https://launchpad.net/~jon-severinsson/+archive/ffmpeg">PPA de Jon Severinsson</a>
            mais pas dans les dépots standards d'Ubuntu.
            Voir le <a href="qtlmovie-user.html#ubuntu">guide de l'utilisateur de QtlMovie</a>
            pour une description de la manière de configurer ce PPA dans les dépots par défaut de votre système.</li>
          <li>Le package <i>ccextractor</i> n'est pas disponible dans les divers dépots
            standards d'Ubuntu. Ce package doit être reconstruit manuellement en utilisant le script
            <i>linuxtools/ccextractor-debbuild.sh</i>.
            Ce script télécharge la dernière version des sources en ligne et reconstruit le package.</li>
        </ul>

        <div class="anchor" id="lincleanup"><h3>Construction multi-platformes</h3></div>

        <p>Quand les répertoires du projet ont été précédement utilisés pour construire QtlMovie
          pour une autre plate-forme (soit depuis un disque partagé ou après une copie de fichiers),
          nettoyer d'abord l'arborescence de fichiers avec le script <i>build/cleanup.sh</i>.</p>
        <p>Ce script détruit tous les fichiers précédement générés, y compris les fichiers de
          configuration spécifiques <i>.pro.user</i>.</p>

        <div class="anchor" id="lindoxy"><h3>Construire la documentation Doxygen</h3></div>

        <p>Exécuter le script <i>build/build-doc.sh</i>.</p>

      </div>
      <footer class="w3-container w3-theme w3-padding-16" style="padding-left:32px">
        <p>QtlMovie est Libre, Gratuit et Open Source |
          <a href="http://qtlmovie.sourceforge.net/" target="_blank">Site Web</a> |
          <a href="https://github.com/qtlmovie/qtlmovie/issues" target="_blank">Signaler un problème</a></p>
      </footer>
    </div>
  </body>
</html> 
